<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-US"><generator uri="https://jekyllrb.com/" version="4.1.1">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" hreflang="en-US" /><updated>2022-03-01T22:03:25+07:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">workspace</title><subtitle>This is for frogs in the world.</subtitle><author><name>./workspace</name><email>sewoomkim93@gmail.com</email></author><entry><title type="html">iOS ì•± ì‹¬ì‚¬ìƒíƒœë¥¼ ë””ìŠ¤ì½”ë“œë¡œ ê³µìœ í•˜ê¸° ğŸ</title><link href="http://localhost:4000/5th-post/" rel="alternate" type="text/html" title="iOS ì•± ì‹¬ì‚¬ìƒíƒœë¥¼ ë””ìŠ¤ì½”ë“œë¡œ ê³µìœ í•˜ê¸° ğŸ" /><published>2022-02-28T00:00:00+07:00</published><updated>2022-02-28T00:00:00+07:00</updated><id>http://localhost:4000/5th-post</id><content type="html" xml:base="http://localhost:4000/5th-post/"><![CDATA[<h1 id="ê°œë°œì¤‘ì¸-ì•±ì˜-ì‹¬ì‚¬-ìƒíƒœ-í™•ì¸">ê°œë°œì¤‘ì¸ ì•±ì˜ ì‹¬ì‚¬ ìƒíƒœ í™•ì¸</h1>
<p>ê°œë°œìë¼ë©´ <code class="language-plaintext highlighter-rouge">Appstore Connect</code> ì‚¬ì´íŠ¸ì— ë“¤ì–´ê°€ë©´ í˜„ì¬ ì•±ì˜ ì‹¬ì‚¬ ìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ì—”ì§€ë‹ˆì–´ë§ íŒ€ì´ ì•„ë‹ˆë¼ë©´ ê¶Œí•œì´ ì—†ëŠ” ê²½ìš°ë„ ë§ê¸° ë•Œë¬¸ì— ëª¨ë“  íŒ€ì›ì´ ì•±ì˜ í˜„ì¬ ìƒíƒœë¥¼ ì•Œê³  ìˆê¸°ë€ ì‰½ì§€ ì•Šë‹¤. ì¼ì¼ì´ ê³µìœ ë¥¼ í•´ì£¼ëŠ” ê²ƒë„ í•˜ë‚˜ì˜ ë°©ë²•ì´ê¸°ëŠ” í•˜ì§€ë§Œ ì´ëŸ° ê²ƒë“¤ì´ í•˜ë‚˜ë‘˜ì”© ìŒ“ì´ê¸° ì‹œì‘í•˜ë©´ ì—…ë¬´ëŸ‰ì´ ê³„ì†í•´ì„œ ëŠ˜ì–´ë‚˜ê¸° ë•Œë¬¸ì— ë¯¸ë¦¬ë¯¸ë¦¬ ìë™í™”ë¥¼ í•´ë‘ë©´ ë‚˜ì¤‘ì— ëˆˆë¬¼ì˜ ì‘ì—…ì„ í•˜ê²Œ ë˜ëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìˆë‹¤. ë¹ ë¥´ê²Œ ì˜¤í”ˆì†ŒìŠ¤ë¥¼ ì°¾ì•„ë³´ì•˜ë”ë‹ˆ ë‹¤í–‰íˆë„ <code class="language-plaintext highlighter-rouge">Slack</code>ìœ¼ë¡œ ì‹¬ì‚¬ ìƒíƒœë¥¼ ë³´ë‚´ì£¼ëŠ” íˆ´ì´ ì´ë¯¸ ìˆì—ˆë‹¤. <br />
ì˜¤ëŠ˜ì€ <a href="https://fernando.kr/ios/2020-11-08-ios-appstore-status-bot/">Fernando</a>ë‹˜ì˜ ì½”ë“œë¥¼ ì°¸ê³ í•˜ì—¬ <code class="language-plaintext highlighter-rouge">Discord</code>ë¡œ ì•±ì˜ ì‹¬ì‚¬ ìƒíƒœë¥¼ ë³´ë‚´ì£¼ëŠ” íˆ´ì„ ë§Œë“¤ì–´ë³´ì.</p>

<h1 id="ì‚¬ìš©í•˜ëŠ”-ê¸°ëŠ¥">ì‚¬ìš©í•˜ëŠ” ê¸°ëŠ¥</h1>
<p>â— <a href="https://developer.apple.com/documentation/appstoreconnectapi">Appstore Connect API</a><br />
â— <a href="https://github.com/fastlane/fastlane/tree/master/spaceship">fastlane Spaceship</a><br />
â— <a href="https://docs.github.com/en/actions">GitHub Actions</a><br />
â— <a href="https://gist.github.com">GitHub Gist</a><br />
â— <a href="https://support.discord.com/hc/en-us/articles/228383668-Intro-to-Webhooks">Discord Webhook</a></p>

<h1 id="ì½”ë“œì˜-íë¦„">ì½”ë“œì˜ íë¦„</h1>
<ol>
  <li>Appstore Connect ì‚¬ì´íŠ¸ì—ì„œ API keyë¥¼ ë°œê¸‰ë°›ëŠ”ë‹¤.</li>
  <li>Spaceship ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•˜ì—¬ ì•± ì‹¬ì‚¬ ì •ë³´ë¥¼ ë°›ì•„ì˜¤ëŠ” ì½”ë“œë¥¼ ì§ ë‹¤.</li>
  <li>GitHub Actionsë¥¼ ì‚¬ìš©í•˜ì—¬ ì¼ì •ì‹œê°„ë§ˆë‹¤ ìœ„ì˜ ì½”ë“œë¥¼ ë°˜ë³µì ìœ¼ë¡œ ëŒë¦´ ìˆ˜ ìˆê²Œ í•œë‹¤.</li>
  <li>ì½”ë“œê°€ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ GitHub Gistì— ì•±ì˜ í˜„ì¬ ì •ë³´ê°€ ì €ì¥ëœë‹¤.</li>
  <li>ì´ì „ì— ë“±ë¡ëœ ì •ë³´ì™€ í˜„ì¬ ì•±ì˜ ì •ë³´ê°€ ë‹¤ë¥´ë©´ Webhookì„ ì´ìš©í•˜ì—¬ í˜„ì¬ ì•±ì˜ ì‹¬ì‚¬ ìƒíƒœë¥¼ Discordë¡œ ë³´ë‚¸ë‹¤.</li>
</ol>

<h1 id="íˆ´ì˜-íŠ¹ì§•">íˆ´ì˜ íŠ¹ì§•</h1>
<p>â— ì„¤ì •ì´ ì§ê´€ì ì´ê³  ê°„ë‹¨<br />
â— ê°œì¸ ì„œë²„ê°€ ì—†ì–´ë„ ì‘ë™ ê°€ëŠ¥<br />
<br />
<code class="language-plaintext highlighter-rouge">Fernando</code>ë‹˜ì˜ ê¸€ì—ì„œë„ ì•Œ ìˆ˜ ìˆë“¯ì´ <strong>ê°„í¸í•¨</strong>ì´ ì œì¼ ì¤‘ìš”í•˜ê¸°ì— ë´‡ ê°œë°œì— ë¦¬ì†ŒìŠ¤ë¥¼ ì“°ê³  ì‹¶ì§€ ì•Šì€ ë¶„ë“¤ì„ ìœ„í•´ ë ˆí¬ì§€í† ë¦¬ <a href="https://github.com/froggydisk/app-status-bot">Fork</a>ë§Œìœ¼ë¡œ ì‘ë™í•  ìˆ˜ ìˆê²Œ í•˜ì˜€ë‹¤.</p>

<h1 id="ì‚¬ìš©ë²•">ì‚¬ìš©ë²•</h1>
<ol>
  <li>ê¹ƒí—ˆë¸Œ ë ˆí¬ì§€í† ë¦¬ë¥¼ <a href="https://github.com/froggydisk/app-status-bot">Fork</a>í•©ë‹ˆë‹¤.</li>
  <li>Appstore Connectì—ì„œ key ID, issuer ID, bundle ID, API Key file (.p8)ì„ ë°œê¸‰ë°›ìŠµë‹ˆë‹¤.</li>
  <li>Discordì—ì„œ Webhook urlì„ ë°œê¸‰ë°›ìŠµë‹ˆë‹¤.</li>
  <li>GitHub tokenì„ ë°œê¸‰ë°›ìŠµë‹ˆë‹¤. (ë°œê¸‰ì‹œ gistsì™€ repo í•­ëª©ì— ì²´í¬í•´ì£¼ì„¸ìš”.)</li>
  <li>ì•± ì •ë³´ë¥¼ ì €ì¥í•  Gistì˜ urlì—ì„œ ë§¨ ë’¤ì˜ IDë§Œ ì €ì¥í•´ë‘¡ë‹ˆë‹¤.<br />
e.g.) https://gist.github.com/froggydisk/[ì´ë¶€ë¶„]</li>
  <li>ìœ„ì—ì„œ ì €ì¥í•œ ì´ 7ê°œì˜ keyë¥¼ Forkí•œ ë ˆí¬ì§€í† ë¦¬ì˜ secretì— í•˜ë‚˜ì”© ì…ë ¥í•©ë‹ˆë‹¤.<br />
<code class="language-plaintext highlighter-rouge">Settings</code> â†’ <code class="language-plaintext highlighter-rouge">Secrets</code> â†’ <code class="language-plaintext highlighter-rouge">Actions</code> â†’ <code class="language-plaintext highlighter-rouge">New repositoy secret</code>
    <blockquote>
      <p>â— PRIVATE_KEY: Appstore Connect API Key file (.p8)<br />
â— KEY_ID : Appstore Connect key ID<br />
â— ISSUER_ID : Appstore Connect issuer ID <br />
â— BUNDLE_ID : Appstore Connect bundle ID with comma<br />
â— DISCORD_WEBHOOK : Discord Webhook url<br />
â— GH_TOKEN: GitHub token<br />
â— GIST_ID: Gist url ID</p>

    </blockquote>
  </li>
  <li>ë§ˆì§€ë§‰ìœ¼ë¡œ ë ˆí¬ì§€í† ë¦¬ì˜ <code class="language-plaintext highlighter-rouge">Actions</code> ì„¹ì…˜ìœ¼ë¡œ ê°€ì„œ workflowë¥¼ í™œì„±í™”í•´ì£¼ë©´ ë!</li>
</ol>

<h1 id="ì£¼ì˜ì ">ì£¼ì˜ì </h1>
<p>ì¼ë‹¨ discordë¡œ ë©”ì„¸ì§€ë¥¼ ë³´ë‚´ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì •ë§ ë‹¤ì–‘í•˜ê²Œ ìˆë‹¤! <a href="https://www.npmjs.com">npm</a>ì—ì„œ ë§ˆìŒì— ë“œëŠ” ê²ƒì„ ì°¾ì•„ë³´ì. npmìœ¼ë¡œ ë‹¤ìš´ë°›ì€ ë’¤ì—ëŠ” discord.jsì˜ ì½”ë“œë¥¼ ì‚¬ìš©ë²•ì— ë§ì¶”ì–´ ë°”ê¿”ì£¼ì–´ì•¼í•œë‹¤. Slackì´ë‚˜ Discord ì´ì™¸ì— ë‹¤ë¥¸ íˆ´ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” ì°¸ê³ í•˜ì.<br />
<br />
ë‹¤ìŒì€ <code class="language-plaintext highlighter-rouge">Fernando</code>ë‹˜ì˜ <a href="https://github.com/techinpark/appstore-status-bot">ë ˆí¬ì§€í† ë¦¬</a>ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ë‹¤ë³´ë©´ ê°€ë”ì”© ì˜¤ì‘ë™í•˜ëŠ” ì´ìŠˆê°€ ìˆì–´ì„œ ì›ì¸ì„ ì°¾ì•„ë³´ì•˜ë‹¤.</p>
<h4 id="1-jsì˜-ë¹„ë™ê¸°-ì²˜ë¦¬">1. jsì˜ ë¹„ë™ê¸° ì²˜ë¦¬</h4>
<p>GitHub Actionsì—ì„œ fetch.ymlì„ ì‹¤í–‰í•˜ë‹¤ë³´ë©´ ìš°ì„ ì ìœ¼ë¡œ Gistì˜ store.db ì •ë³´ë¥¼ ì­‰ ë¶ˆëŸ¬ì˜¨ë‹¤. í•˜ì§€ë§Œ store.db ì•ˆì˜ ë‚´ìš©ì´ ê¸¸ì–´ì§€ê¸° ì‹œì‘í•˜ë©´ì„œ request.get í•  ë•Œ ì‹œê°„ì´ ì˜¤ë˜ê±¸ë¦¬ê¸° ì‹œì‘í•˜ë”ë‹ˆ store.dbë¥¼ ë‹¤ ì½ê¸° ì „ì— í˜„ì¬ ì•± ìƒíƒœì™€ì˜ ë¹„êµê°€ ëë‚˜ë²„ë¦¬ëŠ” ê²½ìš°ê°€ ìˆì—ˆë‹¤. ì‹¤ì œ ì‹¬ì‚¬ ìƒíƒœëŠ” ë³€í™”ê°€ ì—†ëŠ”ë° Discordë¡œ ì•Œë¦¼ì´ ê°€ë²„ë ¸ë‹¤. í•´ê²°ì„ ìœ„í•´ ì•ì— ê°„ë‹¨í•˜ê²Œ awaitë¥¼ ë¶™ì—¬ì£¼ì—ˆë‹¤.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">async</span> <span class="n">function</span> <span class="n">getGist</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">(</span><span class="n">ìƒëµ</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">request</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="n">function</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">body</span><span class="p">){</span>
        <span class="p">(</span><span class="n">ìƒëµ</span><span class="p">)</span>
    <span class="p">});</span>
<span class="p">}</span>
</code></pre></div></div>
<h4 id="2-íŠ¹ì •-ìƒíƒœë§Œ-ì²´í¬">2. íŠ¹ì • ìƒíƒœë§Œ ì²´í¬</h4>
<p>ë°˜ëŒ€ë¡œ ìƒíƒœê°€ ë°”ë€Œì—ˆëŠ”ë°ë„ ì•Œë¦¼ì´ ì•ˆì˜¤ëŠ” ê²½ìš°ë„ ìˆì—ˆë‹¤. í•´ê²°ì„ ìœ„í•´ í˜„ì¬ ì½”ë“œì—ì„œëŠ” ê°€ì¥ ìµœì‹  ë²„ì „ì— ëŒ€í•´ ëª¨ë“  ìƒíƒœ ë³€í™”ë¥¼ ì²´í¬í•˜ë„ë¡ ìˆ˜ì •í–ˆëŠ”ë° í˜¹ì‹œë‚˜ íŠ¹ì • ìƒíƒœì— ëŒ€í•´ì„œë§Œ ì•Œë¦¼ì„ ë³´ë‚´ê³  ì‹¶ë‹¤ë©´ <a href="https://github.com/fastlane/fastlane/blob/master/spaceship/docs/AppStoreConnect.md">Spaceship</a>ì˜ ë¬¸ì„œë¥¼ ì˜ ì‚´í´ë³´ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤. ì•„ë˜ëŠ” Spaceshipì—ì„œ ë²„ì „ì„ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜ë“¤ì´ë‹¤.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="n">get_live_app_store_version</span> <span class="c1"># the version that's currently available in the App Store
</span><span class="n">app</span><span class="p">.</span><span class="n">get_edit_app_store_version</span> <span class="c1"># the version that's in `Prepare for Submission`, `Metadata Rejected`, `Rejected`, `Developer Rejcted`, `Waiting for Review`, `Invalid Binary` mode
</span><span class="n">app</span><span class="p">.</span><span class="n">get_latest_app_store_version</span> <span class="c1"># the version that's the latest one
</span><span class="n">app</span><span class="p">.</span><span class="n">get_pending_release_app_store_version</span> <span class="c1"># the version that's in `Pending Developer Release` or `Pending Apple Release` mode
</span><span class="n">app</span><span class="p">.</span><span class="n">get_in_review_app_store_version</span> <span class="c1"># the version that is in `In Review` mode
</span></code></pre></div></div>

<h1 id="ê²°ê³¼">ê²°ê³¼</h1>
<p><img src="https://github.com/froggydisk/froggydisk.github.io/blob/master/assets/img/discord-noti.png?raw=true" width="600" /><br />
ì œ ë•Œ ì•Œë¦¼ì´ ì˜¨ë‹¤!! ë‹¤ë§Œ GitHub ActionsëŠ” ê³„ì •ë‹¹ ì“¸ ìˆ˜ ìˆëŠ” ì‹œê°„ì´ í•œê³„ê°€ ìˆìœ¼ë¯€ë¡œ Cron Jobì„ ë„ˆë¬´ ìì£¼ ëŒë¦¬ì§„ ë§ì.<br />
<br />
ğŸ“ <a href="https://github.com/froggydisk/app-status-bot">ì½”ë“œ ë³´ëŸ¬ê°€ê¸°</a></p>]]></content><author><name>./workspace</name><email>sewoomkim93@gmail.com</email></author><category term="Blog" /><category term="API" /><summary type="html"><![CDATA[ê°œë°œì¤‘ì¸ ì•±ì˜ ì‹¬ì‚¬ ìƒíƒœ í™•ì¸ ê°œë°œìë¼ë©´ Appstore Connect ì‚¬ì´íŠ¸ì— ë“¤ì–´ê°€ë©´ í˜„ì¬ ì•±ì˜ ì‹¬ì‚¬ ìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ì—”ì§€ë‹ˆì–´ë§ íŒ€ì´ ì•„ë‹ˆë¼ë©´ ê¶Œí•œì´ ì—†ëŠ” ê²½ìš°ë„ ë§ê¸° ë•Œë¬¸ì— ëª¨ë“  íŒ€ì›ì´ ì•±ì˜ í˜„ì¬ ìƒíƒœë¥¼ ì•Œê³  ìˆê¸°ë€ ì‰½ì§€ ì•Šë‹¤. ì¼ì¼ì´ ê³µìœ ë¥¼ í•´ì£¼ëŠ” ê²ƒë„ í•˜ë‚˜ì˜ ë°©ë²•ì´ê¸°ëŠ” í•˜ì§€ë§Œ ì´ëŸ° ê²ƒë“¤ì´ í•˜ë‚˜ë‘˜ì”© ìŒ“ì´ê¸° ì‹œì‘í•˜ë©´ ì—…ë¬´ëŸ‰ì´ ê³„ì†í•´ì„œ ëŠ˜ì–´ë‚˜ê¸° ë•Œë¬¸ì— ë¯¸ë¦¬ë¯¸ë¦¬ ìë™í™”ë¥¼ í•´ë‘ë©´ ë‚˜ì¤‘ì— ëˆˆë¬¼ì˜ ì‘ì—…ì„ í•˜ê²Œ ë˜ëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìˆë‹¤. ë¹ ë¥´ê²Œ ì˜¤í”ˆì†ŒìŠ¤ë¥¼ ì°¾ì•„ë³´ì•˜ë”ë‹ˆ ë‹¤í–‰íˆë„ Slackìœ¼ë¡œ ì‹¬ì‚¬ ìƒíƒœë¥¼ ë³´ë‚´ì£¼ëŠ” íˆ´ì´ ì´ë¯¸ ìˆì—ˆë‹¤. ì˜¤ëŠ˜ì€ Fernandoë‹˜ì˜ ì½”ë“œë¥¼ ì°¸ê³ í•˜ì—¬ Discordë¡œ ì•±ì˜ ì‹¬ì‚¬ ìƒíƒœë¥¼ ë³´ë‚´ì£¼ëŠ” íˆ´ì„ ë§Œë“¤ì–´ë³´ì.]]></summary></entry><entry><title type="html">Tensor elementë¥¼ mutableí•˜ê²Œ ë³µì‚¬í•˜ê¸°</title><link href="http://localhost:4000/4th-post/" rel="alternate" type="text/html" title="Tensor elementë¥¼ mutableí•˜ê²Œ ë³µì‚¬í•˜ê¸°" /><published>2021-08-29T00:00:00+07:00</published><updated>2021-08-29T00:00:00+07:00</updated><id>http://localhost:4000/4th-post</id><content type="html" xml:base="http://localhost:4000/4th-post/"><![CDATA[<p><br />
ì¼ë°˜ì ì¸ ê²½ìš°, í…ì„œ ê°„ì˜ ë³µì‚¬ëŠ” ë³µì‚¬ëœ ì°¸ì¡° ë³€ìˆ˜ì˜ ìˆ˜ì •ì´ ê¸°ì¡´ ì°¸ì¡° ë³€ìˆ˜ì˜ ê°’ì— ë˜‘ê°™ì€ ì˜í–¥ì„ ë¯¸ì¹œë‹¤.
ì˜ˆë¥¼ ë“¤ë©´ ì•„ë˜ì™€ ê°™ë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">torch</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">torch</span><span class="p">.</span><span class="n">tensor</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="c1">#tensor([1., 2., 3.])
</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="c1">#tensor([4., 2., 3.])
</span></code></pre></div></div>

<p>í•˜ì§€ë§Œ ì•„ë˜ì™€ ê°™ì´ aì™€ bì˜ ê¸¸ì´ê°€ ë‹¤ë¥´ê³  aì˜ ìš”ì†Œë“¤ì„ bì— ë°°ë¶„í•˜ëŠ” í˜•ì‹ì¸ ê²½ìš°, ì¦‰ í…ì„œ ìš”ì†Œ ê°„ì˜ ë³µì‚¬ì— ìˆì–´ì„œëŠ” ë³µì‚¬ëœ ì°¸ì¡° ë³€ìˆ˜ì˜ ìˆ˜ì •ì´ ê¸°ì¡´ ì°¸ì¡° ë³€ìˆ˜ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ëª»í•œë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="n">torch</span><span class="p">.</span><span class="n">tensor</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">torch</span><span class="p">.</span><span class="n">tensor</span><span class="p">([</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">])</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
  <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<span class="n">b</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="c1">#tensor([1., 2., 3., 2.])
</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="c1">#tensor([1., 2., 3., 2.])
</span></code></pre></div></div>

<p>ìœ„ì™€ëŠ” ì¡°ê¸ˆ ë‹¤ë¥´ê²Œ, bê°€ í…ì„œê°€ ì•„ë‹ˆë¼ ë¦¬ìŠ¤íŠ¸ë‚˜ numpyë°°ì—´ì¼ ê²½ìš°ì— ìˆì–´ì„œ bì˜ ê° ìš”ì†ŒëŠ” ì•„ë˜ì²˜ëŸ¼ mutableí•˜ë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="n">torch</span><span class="p">.</span><span class="n">tensor</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">])</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
  <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<span class="n">b</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="c1">#[tensor(1.), tensor(2.), tensor(3.), tensor(2.)]
</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="c1">#[tensor(1.), tensor(3.), tensor(3.), tensor(3.)]
</span></code></pre></div></div>

<p>ë‹¤ë§Œ ë¦¬ìŠ¤íŠ¸ë‚˜ ë„˜íŒŒì´ë¥¼ ì‚¬ìš©í•  ê²½ìš°ì—ëŠ” ìœ„ì˜ ì˜ˆì™€ ê°™ì´ ë¦¬ìŠ¤íŠ¸ ì•ˆì— í…ì„œê°€ ì—¬ëŸ¬ê°œ ë“¤ì–´ê°€ ìˆëŠ” í˜•íƒœ(list of tensors)ê°€ ë˜ì–´ë²„ë¦¬ëŠ”ë° ì´ë¥¼ ê·¸ëŒ€ë¡œ torch.tensor(b)ì™€ ê°™ì´ í…ì„œë¡œ ë°”ê¿”ë²„ë¦¬ë©´ gradê°€ ëŠê¸°ë©´ì„œ loss.backward()ì‹œì—</p>
<blockquote>
  <p>RuntimeError: element 0 of tensors does not require grad and does not have a grad_fn</p>
</blockquote>

<p>ì™€ ê°™ì€ ì—ëŸ¬ê°€ ëœ¨ê²Œ ëœë‹¤. ê·¸ ë•Œ ì“¸ ìˆ˜ ìˆëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ê°€ torch.stack ì´ë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">c</span> <span class="o">=</span> <span class="n">torch</span><span class="p">.</span><span class="n">stack</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="c1">#tensor([1., 2., 3., 2.], grad_fn=&lt;StackBackward&gt;)
</span></code></pre></div></div>

<p>ì´ê±¸ ì“°ë©´ grad_fnì„ ìœ ì§€í•˜ë©´ì„œ list of tensorsë¥¼ í•˜ë‚˜ì˜ í…ì„œë¡œ ë§Œë“¤ì–´ ì¤„ ìˆ˜ ìˆë‹¤. 
ì£¼ì˜í•  ì ì€ ìƒˆë¡œìš´ ë³€ìˆ˜ cì— ì„ ì–¸í•˜ëŠ”ê²Œ ì•„ë‹Œ b=torch.stack(b)ì™€ ê°™ì´ bì— ë®ì–´ì”Œìš°ê²Œ ë˜ë©´ ë‚˜ì¤‘ì— íŒŒë¼ë¯¸í„° ì—…ë°ì´íŠ¸ ì‹œì— bëŠ” ì—…ë°ì´íŠ¸ ë˜ì§€ ì•ŠëŠ”ë‹¤. ì´ë²ˆ ê²½ìš°ëŠ” aì™€ bê°€ ë™ì‹œì— ì—…ë°ì´íŠ¸ ë˜ê¸°ë¥¼ ì›í•˜ë¯€ë¡œ ìœ„ì™€ ê°™ì´ cì— ìƒˆë¡œìš´ í…ì„œë¥¼ ë§Œë“¤ì–´ì£¼ì—ˆë‹¤.</p>

<p>ì „ì²´ ì½”ë“œëŠ”</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">torch</span>
<span class="kn">import</span> <span class="nn">torch.optim</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">torch</span><span class="p">.</span><span class="n">tensor</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">],</span> <span class="n">requires_grad</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
  <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<span class="n">b</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">my_loss</span><span class="p">(</span><span class="n">embedding</span><span class="p">):</span> <span class="c1">#contrastive loss
</span>    <span class="n">loss</span> <span class="o">=</span> <span class="o">-</span><span class="p">((</span><span class="n">embedding</span><span class="p">.</span><span class="n">exp</span><span class="p">()[:</span><span class="mi">1</span><span class="p">].</span><span class="nb">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">embedding</span><span class="p">.</span><span class="n">exp</span><span class="p">().</span><span class="nb">sum</span><span class="p">()).</span><span class="n">log</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">loss</span>
<span class="n">optimizer</span> <span class="o">=</span> <span class="n">torch</span><span class="p">.</span><span class="n">optim</span><span class="p">.</span><span class="n">SGD</span><span class="p">([</span><span class="n">a</span><span class="p">],</span> <span class="n">lr</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">torch</span><span class="p">.</span><span class="n">stack</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

<span class="n">loss</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">loss</span> <span class="o">=</span> <span class="n">my_loss</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="n">optimizer</span><span class="p">.</span><span class="n">zero_grad</span><span class="p">()</span>
<span class="n">loss</span><span class="p">.</span><span class="n">backward</span><span class="p">()</span>
<span class="n">optimizer</span><span class="p">.</span><span class="n">step</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="c1">#[tensor(1.0009, grad_fn=&lt;AsStridedBackward&gt;), tensor(1.9996, ...]
</span><span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="c1">#tensor([1.0009, 1.9996, 2.9995], requires_grad=True)
</span></code></pre></div></div>
<p>aì™€ bê°€ ì„±ê³µì ìœ¼ë¡œ ë™ì‹œì— ì—…ë°ì´íŠ¸ ëœë‹¤. 
ë¬¼ë¡  ë‹¨ìˆœíˆ 1ì°¨ì› í…ì„œê°€ ì•„ë‹ˆë¼ ê·¸ ì´ìƒì˜ í…ì„œì— ëŒ€í•´ì„œë„ ì ìš© ê°€ëŠ¥í•˜ë‹¤.</p>]]></content><author><name>./workspace</name><email>sewoomkim93@gmail.com</email></author><category term="Blog" /><category term="Pytorch" /><summary type="html"><![CDATA[ë¨¸ì‹ ëŸ¬ë‹/ë”¥ëŸ¬ë‹]]></summary></entry><entry><title type="html">ëª¨ë°”ì¼ì—ì„œ hover íš¨ê³¼ ì—†ì• ê¸°</title><link href="http://localhost:4000/3rd-post/" rel="alternate" type="text/html" title="ëª¨ë°”ì¼ì—ì„œ hover íš¨ê³¼ ì—†ì• ê¸°" /><published>2020-08-28T00:00:00+07:00</published><updated>2020-08-28T00:00:00+07:00</updated><id>http://localhost:4000/3rd-post</id><content type="html" xml:base="http://localhost:4000/3rd-post/"><![CDATA[<p><br />
ì•„ì´í°ì´ë‚˜ ì•„ì´íŒ¨ë“œì™€ ê°™ì€ ê¸°ê¸°ì—ì„œëŠ” PCì™€ëŠ” ë‹¤ë¥´ê²Œ hover íš¨ê³¼ê°€ ì ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤.<br />
ê·¸ ì´ìœ ëŠ” ë§ˆìš°ìŠ¤ê°€ ì•„ë‹Œ í„°ì¹˜ ë°©ì‹ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì´ë‹¤.<br />
ê·¸ëŸ¬ë‹¤ë³´ë‹ˆ ëª¨ë°”ì¼ì—ì„œ ë“œëë‹¤ìš´ ë©”ë‰´ ê°™ì€ ê²½ìš°, í•œ ë²ˆ ëˆ„ë¥´ë©´ ê³„ì† í˜¸ë²„ëœ ìƒíƒœê°€ ë˜ì–´ íš¨ê³¼ê°€ ì‚¬ë¼ì§€ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ìˆë‹¤.<br />
ì´ ë•Œ í™”ë©´ì˜ ë‹¤ë¥¸ ë¶€ë¶„ì„ ëˆ„ë¥´ë©´ í˜¸ë²„íš¨ê³¼ê°€ ì‚¬ë¼ì§€ê²Œ ë§Œë“¤ê³  ì‹¶ì„ ë•Œ ì“¸ë§Œí•œ ë°©ë²•ì´ ìˆë‹¤.</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>ëª¨ë°”ì¼ì—ì„œ hover íš¨ê³¼ ì—†ì• ê¸°<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"style.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;style&gt;</span>
<span class="k">@media</span> <span class="p">(</span> <span class="n">max-width</span><span class="p">:</span> <span class="m">768px</span> <span class="p">){</span>
        <span class="nt">button</span> <span class="p">{</span>
          <span class="nl">-webkit-tap-highlight-color</span><span class="p">:</span><span class="nb">transparent</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="nt">&lt;/style&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body</span> <span class="na">ontouchstart=</span><span class="s">""</span><span class="nt">&gt;</span>

  <span class="nt">&lt;/body&gt;</span>
</code></pre></div></div>
<p>í˜¸ë²„ íš¨ê³¼ë¥¼ ì ìš©í•˜ëŠ” classì˜ style ì•ˆì— <strong>-webkit-tap-highlight-color:transparent;</strong>ë¥¼ ë„£ì–´ì£¼ê³ (í„°ì¹˜ ì‹œ íƒ­íš¨ê³¼ ì œê±°)<br />
bodyì— <strong>ontouchstart=â€â€œ</strong>ë¥¼ ì ìš©í•˜ë©´ ë</p>]]></content><author><name>./workspace</name><email>sewoomkim93@gmail.com</email></author><category term="Blog" /><category term="HTML/CSS" /><summary type="html"><![CDATA[ë°˜ì‘í˜• ì›¹í˜ì´ì§€ ë§Œë“¤ê¸°]]></summary></entry><entry><title type="html">CAM: Class Activation Map Implementation</title><link href="http://localhost:4000/assignment/" rel="alternate" type="text/html" title="CAM: Class Activation Map Implementation" /><published>2020-08-04T00:00:00+07:00</published><updated>2020-08-04T03:41:00+07:00</updated><id>http://localhost:4000/assignment</id><content type="html" xml:base="http://localhost:4000/assignment/"><![CDATA[<p><br /></p>
<p align="justify">
Today, I'm going to talk about a paper, 'Learning Deep Features for Discriminative Localization'
(<a href="https://arxiv.org/pdf/1512.04150.pdf">Zhou+ CVPR16</a>).
I will review this paper lightly first and try to implement the main functions of CAM with Pytorch, which are introduced in the paper.  
</p>

<h2 id="background">Background</h2>

<p align="justify">
Over a long history of CNN, people made a great effort to increase the accuracy of the trained model. Since 2012, deep learning techniques have developed overwhelmingly 
and have now surpassed human beings in terms of object recognition.
However, what they had known was that filters could find the edge of an object at the shallow layers and capture the high-dimensional features as the network goes deeper.
The important thing is, they didn't know why the machine made such a judgment when it was asked to guess what the object was. 
That is to say, there was not any method that could explain the process of the machine's thinking.  
<br /><br />
<em>CAM</em>, which was developed by Bolei Zhou+ in 2016, is the very way to solve this problem. 
Using CAM, we can interpret an image from the machine's point of view and explain which parts of the image are utilized to make a decision.
</p>

<h2 id="introduction">Introduction</h2>

<p align="justify">
In this paper, the author showed that trained CNN model is successfully able to localize the discriminative regions of an object for classification despite no data on the location
of the object was provided.  
</p>

<p align="justify">
Generally, a CNN model has a Fully-Connected layer(FC) at the last part of the network, which is used to generate the final output. To use the FC layer, however, the features 
need to be flattened while losing the spatial information that convolution layers accumulated through the previous parts of the network.
This is the main reason that makes the model lose the ability to localize objects.  <br />
Recently, popular CNN models such as NIN(Network in Network) and GoogLeNet have been proposed to avoid FC layer not only to keep the localization ability which is mentioned 
above, but also to minimize the number of parameters while maintaining high performance.  <br />
In order to achive this, the author just applied GAP(global average pooling) to the model.
The use of GAP prevented overfitting during training and encouraged the network to identify the complete extent of the object at the same time.
After the application of GAP, trained CNN model actually gets to build a generic localizable deep representation that exposes the implicit attention of CNNs on an image.
</p>

<p align="justify">
What we have to look at is that while GAP is not a novel techinique at all, which is even simple technique with little computational cost, the unique observation that it can be
applied for accurate discriminative localizations offered a new paradigm in ML model analysis.  <br />
This approach should be the core contribution of this paper and it provides us with another glimpse into the soul of CNNs.  
</p>

<h2 id="class-activation-mapcam">Class Activation Map(CAM)</h2>

<p align="justify">
CAM actually works at the end of the network, just before the final output layer(softmax in the case of categorization).
At this point, GAP is applied to the convolutional feature maps and the features after the GAP layer finally pass through the last FC layer.
(This network uses only one FC layer)
And then, CAM identifies the importance of the image regions by projecting back the weights of the output layer onto the convolutional feature maps. 
</p>

<p><strong>To explain the concept with equations,</strong><br />
Let $f_k(x,y)$ represent the activation of unit k in the last convolutional layer at spatial location (x,y). Then, for unit k, the result of performing GAP is expressed
as $F^k$ and it equals to $\sum_{x, y}f_k(x,y)$. Thus for a given class c, the input to the softmax, $S_c$ is $\sum_k w_{k}^{c}F_k$, where $w_{k}^{c}$ is the weight 
corresponding to class c for unit k. Essentially, $w_{k}^{c}$ indicates the importnace of $F_k$ for class c. To sum up, it becomes like this.</p>

<p>$\begin{matrix}
S_c &amp;=&amp; \sum_k w_k^c F_k <br />
&amp;=&amp; \sum_k w_c^k \sum_{x, y}f_k(x,y) <br />
&amp;=&amp; \sum_{x, y} \sum_k w_k^c f_k(x,y) 
\end{matrix}$</p>

<p>If we define $M_c$ as the CAM for class c, where each spatial element is given by $M_c(x, y)$ = $\sum_k w_k^c f_k(x, y)$, we can find $S_c = \sum_{x, y} M_c(x, y)$.
Hence, $M_c(x,y)$ directly indicates the importance of the activation at spatial grid (x,y) leading to the classification of an image to class c.</p>

<p align="justify">
Therefore, the class activation map is simply a weighted linear sum of the presence of visual patterns at different spatial location. By simply upsampling the class activation map 
to the size of the input image, the regions of the image that are most relevant to the particular category can be identified.
</p>

<p><img src="https://github.com/froggydisk/froggydisk.github.io/blob/master/assets/img/CAM%20structure.png?raw=true" alt="structure" class="align-center" /></p>

<h2 id="implementation">Implementation</h2>

<p align="justify">
I tried to implement the main functions of the original project and visually check their results.
You can refer to the code <a href="https://github.com/froggydisk/CAM">here(CAM Implementation)</a>.
I used Pytorch and you can simply run the code on GoogleColab. 
</p>

<p align="justify">
I made a very simple network first and used CIFAR10 for training.
After the training is finished, the model becomes able to classify an object and we can find the class with the highest probability.
Then, we can draw a heatmap by multiplying the corresponding weights with each feature maps that came out from the last convolutional layer.  
</p>

<p>The code below shows the main parts of the CAM function.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">feature_collection</span> <span class="o">=</span> <span class="p">[]</span> 
<span class="c1"># get features from the input
</span><span class="k">def</span> <span class="nf">get_feature</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>                                         
  <span class="n">_</span><span class="p">,</span> <span class="n">feature</span> <span class="o">=</span> <span class="n">net</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
  <span class="n">feature_collection</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature</span><span class="p">.</span><span class="n">cpu</span><span class="p">().</span><span class="n">data</span><span class="p">.</span><span class="n">numpy</span><span class="p">())</span>

<span class="n">params</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">net</span><span class="p">.</span><span class="n">parameters</span><span class="p">())</span>
<span class="c1"># get weights from the final layer
</span><span class="n">weight_for_softmax</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">squeeze</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">].</span><span class="n">cpu</span><span class="p">().</span><span class="n">data</span><span class="p">.</span><span class="n">numpy</span><span class="p">())</span>

<span class="c1"># draw a heatmap
</span><span class="k">def</span> <span class="nf">Do_CAM</span><span class="p">(</span><span class="n">feature</span><span class="p">,</span> <span class="n">weigth_for_softmax</span><span class="p">,</span> <span class="n">class_id</span><span class="p">):</span> 
  <span class="n">upsample_size</span> <span class="o">=</span> <span class="p">(</span><span class="n">img_size</span><span class="p">,</span> <span class="n">img_size</span><span class="p">)</span>
  <span class="n">_</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">w</span> <span class="o">=</span> <span class="n">feature</span><span class="p">.</span><span class="n">shape</span>
  <span class="c1"># (weights) x (feature maps)
</span>  <span class="n">cam</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">dot</span><span class="p">(</span><span class="n">weight_for_softmax</span><span class="p">[</span><span class="n">class_id</span><span class="p">],</span><span class="n">feature</span><span class="p">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">h</span><span class="o">*</span><span class="n">w</span><span class="p">))</span>  
  <span class="n">cam</span> <span class="o">=</span> <span class="n">cam</span><span class="p">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
  <span class="n">cam</span> <span class="o">=</span> <span class="p">(</span><span class="n">cam</span> <span class="o">-</span> <span class="n">np</span><span class="p">.</span><span class="nb">min</span><span class="p">(</span><span class="n">cam</span><span class="p">))</span> 
  <span class="n">cam</span> <span class="o">=</span> <span class="n">cam</span> <span class="o">/</span> <span class="n">np</span><span class="p">.</span><span class="nb">max</span><span class="p">(</span><span class="n">cam</span><span class="p">)</span>
  <span class="n">cam</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">uint8</span><span class="p">(</span><span class="mi">255</span> <span class="o">*</span> <span class="n">cam</span><span class="p">)</span>
  <span class="n">cam</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">cam</span><span class="p">,</span> <span class="n">upsample_size</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">cam</span>
</code></pre></div></div>
<p>By implementing this code, you can get a heatmap of the image you want to see.</p>

<p><strong>Settings</strong></p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dataset</span> <span class="o">=</span> <span class="s">'CIFAR10'</span>
<span class="n">img_size</span> <span class="o">=</span> <span class="mi">32</span>
<span class="n">batch_size</span> <span class="o">=</span> <span class="mi">128</span>
<span class="n">epoch</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">learning_rate</span> <span class="o">=</span> <span class="mf">0.001</span>
</code></pre></div></div>
<p>These are the settings for my experiment. The number of epochs can vary depending on the condition.</p>

<p>Here are some results.</p>

<p><img src="https://github.com/froggydisk/froggydisk.github.io/blob/master/assets/img/bird1.jpg?raw=true" alt="test1" /> <img src="https://github.com/froggydisk/froggydisk.github.io/blob/master/assets/img/bird5.png?raw=true" alt="cam1" /><br />
<img src="https://github.com/froggydisk/froggydisk.github.io/blob/master/assets/img/horse1.jpg?raw=true" alt="test2" /> <img src="https://github.com/froggydisk/froggydisk.github.io/blob/master/assets/img/horse5-1.png?raw=true" alt="cam2" /><br />
<img src="https://github.com/froggydisk/froggydisk.github.io/blob/master/assets/img/ship1.jpeg?raw=true" alt="test3" /> <img src="https://github.com/froggydisk/froggydisk.github.io/blob/master/assets/img/ship40.png?raw=true" alt="cam3" /></p>

<p>The results show that class activation maps are highlighting the discriminative object parts detected by the CNN.</p>

<p>While implementing, it would be a bit hard to see the results because the size of CIFAR10 images is 32x32.<br />
I would recommend you to train the model with another dataset if possible, or just take a pretrained model like GoogLeNet for better results.
If you use the pretrained model, you donâ€™t need to train it anymore. You can use it as it is.</p>

<p>And this is the results of comparison between 5-epoch-experiment and 50-epoch-experiment.
I captured the model every 10 epochs during training and observed how the results change.</p>

<p>Â Â Â Â Â  5 Epoch Â Â Â Â Â Â Â Â Â Â Â 50 Epoch<br />
<img src="https://github.com/froggydisk/froggydisk.github.io/blob/master/assets/img/dog5-1.png?raw=true" alt="epoch5-1" title="5 epochs" /> <img src="https://github.com/froggydisk/froggydisk.github.io/blob/master/assets/img/dog50-1.png?raw=true" alt="epoch50-1" title="50 epochs" /><br />
<img src="https://github.com/froggydisk/froggydisk.github.io/blob/master/assets/img/dog5-2.png?raw=true" alt="epoch5-2" title="5 epochs" /> <img src="https://github.com/froggydisk/froggydisk.github.io/blob/master/assets/img/dog50-2.png?raw=true" alt="epoch50-2" title="50 epochs" /></p>

<p>As expected, you can find the model concentrates on the details of the image as the number of epochs increases.
Consequently, we can say global average pooling CNNs can perform accurate object localization.</p>

<h2 id="reference">Reference</h2>

<p><a href="https://kangbk0120.github.io/articles/2018-02/cam">https://kangbk0120.github.io/articles/2018-02/cam</a></p>]]></content><author><name>./workspace</name><email>sewoomkim93@gmail.com</email></author><category term="Assignment" /><category term="Pytorch" /><summary type="html"><![CDATA[Learning Deep Features for Discriminative Localization]]></summary></entry><entry><title type="html">Top1 Accuracyì™€ Top5 Accuracy ì´í•´í•˜ê¸°</title><link href="http://localhost:4000/2nd-post/" rel="alternate" type="text/html" title="Top1 Accuracyì™€ Top5 Accuracy ì´í•´í•˜ê¸°" /><published>2020-06-12T00:00:00+07:00</published><updated>2020-06-12T00:00:00+07:00</updated><id>http://localhost:4000/2nd-post</id><content type="html" xml:base="http://localhost:4000/2nd-post/"><![CDATA[<p><br /></p>
<p align="justify">
ë”¥ëŸ¬ë‹ ê´€ë ¨ ë…¼ë¬¸ì„ ì½ë‹¤ë³´ë©´ Top1, Top5, Top10ê³¼ ê°™ì€ ë§ë“¤ì„ ìì£¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. <br />
ëŒ€ì¶© ê°ì´ ì˜¤ê¸°ëŠ” í•˜ì§€ë§Œ ì •í™•íˆ ë¬´ì—‡ì„ ì˜ë¯¸í•˜ëŠ” ê²ƒì¼ê¹Œìš”?  <br />
Top1 ë’¤ì—ëŠ” Accuracyê°€ ì˜¤ëŠ” ê²½ìš°ì™€ Lossê°€ ì˜¤ëŠ” ê²½ìš° ë‘ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.  <br />
Top1 Accuracyì˜ ê²½ìš°ì—ëŠ” ê°€ì¥ ê°€ê¹Œìš´ í´ë˜ìŠ¤ë¥¼ ì˜ˆì¸¡í–ˆì„ ë•Œ ì •ë‹µì´ì—ˆë˜ ê²½ìš°ì˜ ì „ì²´ ê²½ìš°ì˜ ìˆ˜ì— ëŒ€í•œ ë¹„ìœ¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.<br />
ë°˜ëŒ€ë¡œ Top1 Lossì˜ ê²½ìš°ì—ëŠ” ê°€ì¥ ê°€ê¹Œìš´ í´ë˜ìŠ¤ë¥¼ ì˜ˆì¸¡í–ˆì„ ë•Œ ì •ë‹µì´ ì•„ë‹ˆì—ˆë˜ ê²½ìš°ì˜ ì „ì²´ ê²½ìš°ì˜ ìˆ˜ì— ëŒ€í•œ ë¹„ìœ¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.  <br />
ì˜ˆë¥¼ ë“¤ì–´ ê°•ì•„ì§€ ê³ ì–‘ì´ ë¯¸ì–´ìº£ ê°œêµ¬ë¦¬ ë„ˆêµ¬ë¦¬ë¥¼ êµ¬ë¶„í•˜ëŠ” ë¶„ë¥˜ê¸°ê°€ ìˆë‹¤ê³  í•©ì‹œë‹¤.<br />
ìœ„ì˜ ë‹¤ì„¯ ë™ë¬¼ ì¤‘ ì–´ëŠ í•œ ë™ë¬¼ì˜ ì´ë¯¸ì§€ë¥¼ ë¶„ë¥˜ê¸°ì— ì§‘ì–´ë„£ì—ˆë”ë‹ˆ ë¶„ë¥˜ê¸°ì˜ ë§ˆì§€ë§‰ ì¸µìœ¼ë¡œë¶€í„° Softmax í•¨ìˆ˜ë¥¼ ì§€ë‚˜ì„œ ë‚˜ì˜¨ ê²°ê³¼ê°€ (0.1, 0.15, 0.3, 0.4, 0.05)ì˜€ë‹¤ê³  í•©ì‹œë‹¤.     <br />
ë²¡í„°ì˜ ê° ìš”ì†Œê°€ (ê°•ì•„ì§€, ê³ ì–‘ì´, ë¯¸ì–´ìº£, ê°œêµ¬ë¦¬, ë„ˆêµ¬ë¦¬)ìˆœìœ¼ë¡œ ê°ê°ì˜ í´ë˜ìŠ¤ë¡œ ë¶„ë¥˜ë  í™•ë¥ ì´ë¼ê³  í•œë‹¤ë©´ ì´ë¯¸ì§€ê°€ ë¶„ë¥˜ë  í´ë˜ìŠ¤ ì¤‘ì— ê°€ì¥ í™•ë¥ ì´ ë†’ì€ ê²ƒì€ ê°œêµ¬ë¦¬ê°€ ë©ë‹ˆë‹¤.  <br />
ê°™ì€ ë°©ë²•ìœ¼ë¡œ ë‘ë²ˆì§¸ë¡œ í™•ë¥ ì´ ë†’ì€ í´ë˜ìŠ¤ëŠ” ë¯¸ì–´ìº£ì´ ë˜ê² ë„¤ìš”.<br />
ì´ë¯¸ì§€ê°€ ë¶„ë¥˜ë  í™•ë¥ ì´ ë†’ì€ ìˆœìœ¼ë¡œ í´ë˜ìŠ¤ë¥¼ ë‚˜ì—´í•˜ë©´ ê°œêµ¬ë¦¬ -&gt; ë¯¸ì–´ìº£ -&gt; ê³ ì–‘ì´ -&gt; ê°•ì•„ì§€ -&gt; ë„ˆêµ¬ë¦¬ ìˆœì´ ë©ë‹ˆë‹¤.  <br />
ë§Œì•½ì— ì‹¤ì œë¡œ ë„£ì€ ì´ë¯¸ì§€ê°€ ê°œêµ¬ë¦¬ì˜€ë‹¤ê³  í–ˆì„ ë•Œ Top1 AccuracyëŠ” 1ì´ ë˜ê³  Top1 LossëŠ” 0ì´ ë˜ê² ë„¤ìš”.  <br />
ì˜ˆìƒí•˜ì…¨ê² ì§€ë§Œ Top5 AccuracyëŠ” ê°€ì¥ ê°€ê¹Œìš´ í´ë˜ìŠ¤ë¥¼ ë‹¤ì„¯ ê°œ ë½‘ì•˜ì„ ë•Œ ê·¸ ì•ˆì— ì •ë‹µì´ ì¡´ì¬í•œ ê²½ìš°ì˜ ë¹„ìœ¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.<br />
ì°¸ê³ ë¡œ ë¶„ë¥˜ê¸°ê°€ 5ê°œì˜ í´ë˜ìŠ¤ ë°–ì— êµ¬ë¶„í•˜ì§€ ëª»í•˜ë¯€ë¡œ ì—¬ê¸°ì„œëŠ” Top5 AccuracyëŠ” ì˜ë¯¸ê°€ ì—†ë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <br />
ì…ë ¥ ì´ë¯¸ì§€ê°€ ìœ„ì˜ ë‹¤ì„¯ ì¢…ë¥˜ì˜ ë™ë¬¼ ì¤‘ í•˜ë‚˜ë¼ê³  í–ˆì„ ë•Œ, ë¶„ë¥˜ë  ìˆ˜ ìˆëŠ” í´ë˜ìŠ¤ê°€ ë‹¤ì„¯ê°œ ë¿ì´ë¯€ë¡œ ë¬´ì¡°ê±´ ì •ë‹µì´ Top5 ì•ˆì—ëŠ” ë“¤ì–´ìˆê²Œ ë˜ê¸° ë•Œë¬¸ì´ì£ .<br />
í˜¹ì—¬ë‚˜ ì…ë ¥ ì´ë¯¸ì§€ê°€ ìœ„ì˜ ë‹¤ì„¯ ì¢…ë¥˜ì— êµ­í•œë˜ì–´ ìˆì§€ ì•ŠëŠ”ë‹¤ë©´ ì´ì•¼ê¸°ëŠ” ë‹¬ë¼ì§‘ë‹ˆë‹¤ë§Œ ì—¬ê¸°ì„œëŠ” ê³ ë ¤í•˜ì§€ ì•Šê² ìŠµë‹ˆë‹¤.  <br />
ë³´í†µ Top1 Accuracy + Top1 Loss = 1 ì´ ë˜ë¯€ë¡œ Accuracyë“  Lossë“  ê²°êµ­ì—ëŠ” ê°™ì€ ì´ì•¼ê¸°ë¥¼ í•˜ê³  ìˆë‹¤ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤. 
</p>]]></content><author><name>./workspace</name><email>sewoomkim93@gmail.com</email></author><category term="Blog" /><category term="Paper" /><summary type="html"><![CDATA[ë…¼ë¬¸ì— ìì£¼ ë“±ì¥í•˜ëŠ” Top1, Top5ì˜ ì˜ë¯¸ëŠ”?]]></summary></entry><entry><title type="html">github.io ë¸”ë¡œê·¸ ì‹œì‘í•˜ê¸°</title><link href="http://localhost:4000/1st-post/" rel="alternate" type="text/html" title="github.io ë¸”ë¡œê·¸ ì‹œì‘í•˜ê¸°" /><published>2020-05-02T00:00:00+07:00</published><updated>2019-05-04T20:06:00+07:00</updated><id>http://localhost:4000/1st-post</id><content type="html" xml:base="http://localhost:4000/1st-post/"><![CDATA[<p>GitHub Blog ì„œë¹„ìŠ¤ì¸ github.io ë¸”ë¡œê·¸ë¥¼ ì‹œì‘í•˜ê¸°ë¡œ í–ˆë‹¤.</p>

<p>YFMì—ì„œ ì •ì˜í•œ ì œëª©ì„ ì´ì¤‘ ê´„í˜¸ êµ¬ë¬¸ìœ¼ë¡œ ë³¸ë¬¸ì— ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.
ì´ ê¸€ì˜ ì œëª©ì€ â€œgithub.io ë¸”ë¡œê·¸ ì‹œì‘í•˜ê¸°â€ì´ê³ 
ë§ˆì§€ë§‰ìœ¼ë¡œ ìˆ˜ì •ëœ ì‹œê°„ì€ â€œ2019-05-04 08:06:00 -0500â€ì´ë‹¤.</p>]]></content><author><name>./workspace</name><email>sewoomkim93@gmail.com</email></author><category term="Blog" /><category term="Blog" /><summary type="html"><![CDATA[GitHub Blog ì„œë¹„ìŠ¤ì¸ github.io ë¸”ë¡œê·¸ ì‹œì‘í•˜ê¸°ë¡œ í–ˆë‹¤.]]></summary></entry></feed>