I"<p>ë§ˆìŠ¤í„° ë…¸ë“œì˜ ì„¤ì •ì´ ì´ë¯¸ ë˜ì–´ ìˆê³  ì¶”ê°€í•  ì›Œì»¤ë…¸ë“œì˜ OSê°€ ìš°ë¶„íˆ¬ 20.04 ë²„ì „ì¸ ê²½ìš°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…í•˜ê² ë‹¤.</p>

<h1 id="í•„ìš”ì¡°ê±´">í•„ìš”ì¡°ê±´</h1>
<p>â— docker
â— kubelet
â— kubeadm
â— kubectl</p>

<h1 id="ë§ˆë¬´ë¦¬">ë§ˆë¬´ë¦¬</h1>
<p>ë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ í† í°ì„ ë°œê¸‰í•˜ì—¬ ìƒˆë¡œ ì—°ê²°í•  ì›Œì»¤ë…¸ë“œì— ì…ë ¥í•´ì¤€ë‹¤.</p>

<hr />

<p>ì´ìƒì´ë‹¤. ì´ë ‡ê²Œë§Œ ë³´ë©´ ëª¹ì‹œ ê°„ë‹¨í•˜ë‹¤.</p>

<p>í•˜ë‚˜í•˜ë‚˜ ì°¨ê·¼ì°¨ê·¼ ì§„í–‰í•´ë³´ì.</p>

<h3 id="docker-ì„¤ì¹˜">docker ì„¤ì¹˜</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-fsSL</span> https://download.docker.com/linux/ubuntu/gpg | <span class="nb">sudo </span>gpg <span class="nt">--dearmor</span> <span class="nt">-o</span> /usr/share/keyrings/docker-archive-keyring.gpg
<span class="nb">echo</span> <span class="se">\</span>
  <span class="s2">"deb [arch=</span><span class="si">$(</span>dpkg <span class="nt">--print-architecture</span><span class="si">)</span><span class="s2"> signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu </span><span class="se">\</span><span class="s2">
  </span><span class="si">$(</span>lsb_release <span class="nt">-cs</span><span class="si">)</span><span class="s2"> stable"</span> | <span class="nb">sudo tee</span> /etc/apt/sources.list.d/docker.list <span class="o">&gt;</span> /dev/null
<span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt-get <span class="nb">install </span>docker-ce docker-ce-cli containerd.io
<span class="nb">sudo </span>docker version
<span class="nb">sudo </span>systemctl <span class="nb">enable </span>docker
<span class="nb">sudo </span>systemctl start docker
</code></pre></div></div>

<h3 id="kubelet-kubeadm-kubectl-ì„¤ì¹˜">kubelet, kubeadm, kubectl ì„¤ì¹˜</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="nt">-y</span> apt-transport-https ca-certificates curl
curl <span class="nt">-s</span> https://packages.cloud.google.com/apt/doc/apt-key.gpg | <span class="nb">sudo </span>apt-key add -
<span class="nb">echo</span> <span class="s2">"deb http://apt.kubernetes.io/ kubernetes-xenial main"</span> | <span class="nb">sudo tee</span> /etc/apt/sources.list.d/kubernetes.list
<span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="nt">-y</span> kubelet kubeadm kubectl
<span class="nb">sudo </span>apt-mark hold kubelet kubeadm kubectl
<span class="nb">sudo </span>systemctl daemon-reload
<span class="nb">sudo </span>systemctl restart kubelet
</code></pre></div></div>

<h3 id="í† í°-ë°œê¸‰-ë°-ë“±ë¡">í† í° ë°œê¸‰ ë° ë“±ë¡</h3>
<p>ìš°ì„ , ë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ í† í°ì„ ë°œê¸‰í•œë‹¤.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>kubeadm token create <span class="nt">--print-join-command</span>
</code></pre></div></div>
<p>ì´ë ‡ê²Œ í•˜ë©´ <code class="language-plaintext highlighter-rouge">kubeadm join &lt;Kubernetes API Server:PORT&gt; --token &lt;Token ê°’&gt; --discovery-token-ca-cert-hash sha256:&lt;Hash ê°’&gt;</code> ì´ëŸ¬í•œ í˜•íƒœì˜ ê²°ê³¼ê°’ì´ ë‚˜ì˜¤ëŠ”ë° ê·¸ëŒ€ë¡œ ë³µì‚¬í•´ì„œ ìƒˆë¡œìš´ ì›Œì»¤ë…¸ë“œ í„°ë¯¸ë„ì— ë¶™ì—¬ë„£ê¸° í•´ì£¼ë©´ ëœë‹¤.</p>

<p>ê°ê°ì˜ ê°’ì€ ë‹¤ìŒê³¼ ê°™ì´ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># kubectlì´ ë°”ë¼ë³´ëŠ” API ì„œë²„ ì£¼ì†Œ</span>
kubectl cluster-info
<span class="c"># token ê°’ í™•ì¸</span>
kubeadm token list
<span class="c"># hash ê°’ í™•ì¸</span>
openssl x509 <span class="nt">-pubkey</span> <span class="nt">-in</span> /etc/kubernetes/pki/ca.crt | openssl rsa <span class="nt">-pubin</span> <span class="nt">-outform</span> der 2&gt;/dev/null | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hex</span> | <span class="nb">sed</span> <span class="s1">'s/^.* //'</span>
</code></pre></div></div>

<h3 id="-ì—ëŸ¬">ğŸ”’ ì—ëŸ¬</h3>
<p>ìœ„ì˜ ê³¼ì •ì—ì„œ ì•„ë§ˆë„ ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•  ê²ƒì´ë‹¤.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>error execution phase preflight: <span class="o">[</span>preflight] Some fatal errors occurred:
<span class="o">[</span>ERROR CRI]: container runtime is not running: output: <span class="nb">time</span><span class="o">=</span><span class="s2">"2020-11-25T12:58:32Z"</span> <span class="nv">level</span><span class="o">=</span>fatal <span class="nv">msg</span><span class="o">=</span><span class="s2">"getting status of runtime failed: rpc error: code = Unimplemented desc = unknown service runtime.v1alpha2.RuntimeService"</span>
, error: <span class="nb">exit </span>status 1
</code></pre></div></div>

<h3 id="-í•´ê²°">ğŸ”‘ í•´ê²°</h3>
<p>ì•„ë˜ì™€ ê°™ì´ í•´ê²°í•˜ë©´ ëœë‹¤.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo rm</span> /etc/containerd/config.toml
<span class="nb">sudo </span>systemctl restart containerd
</code></pre></div></div>

<p>í•­ìƒ ëŠë¼ì§€ë§Œ ëŒ€ë¶€ë¶„ì˜ ì¿ ë²„ë„¤í‹°ìŠ¤ ì˜¤ë¥˜ëŠ” kubelet, docker, containerd, calicoì—ì„œ ë°œìƒí•˜ëŠ” ê²ƒ ê°™ë‹¤.</p>

<p>ë§ˆì§€ë§‰ìœ¼ë¡œ ë§ˆìŠ¤í„°ë…¸ë“œì— ë“¤ì–´ê°€ì„œ <code class="language-plaintext highlighter-rouge">kubectl get node</code>ë¥¼ í•´ë³´ì. ì˜ ì¸ì‹ì´ ëœë‹¤ë©´ ì„±ê³µì´ë‹¤.</p>

<h1 id="ì°¸ê³ ">ì°¸ê³ </h1>
<p><a href="https://confluence.curvc.com/pages/releaseview.action?pageId=98048155">Ubuntuì—ì„œ ì¿ ë²„ë„¤í‹°ìŠ¤(k8s) ì„¤ì¹˜ ê°€ì´ë“œ</a></p>
:ET