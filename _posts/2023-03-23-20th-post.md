---
title: "[Ubuntu] Nvidia λ“λΌμ΄λ²„ μ„¤μΉ ν›„ ssh μ ‘μ† λ¶κ°€ λ¬Έμ "

comments: true
categories:
  - Blog
tags:
  - Linux, Ubuntu, Nvidia
last_modified_at: 2023-03-23T
---


# λ€μƒ
μ΄ κΈ€μ€ Nvidia GPUκ°€ μ„¤μΉλ μ°λ¶„ν¬ μ„λ²„μ— ssh μ ‘μ†μ„ ν•κΈ° μ„ν•΄ μ„Έν…μ„ ν•μ‹λ” λ¶„λ“¤μ„ λ€μƒμΌλ΅ ν•©λ‹λ‹¤. 

# 1. Nvidia λ“λΌμ΄λ²„ μ„¤μΉ

### μ¥μΉ ν™•μΈ
λ¨Όμ € GPU μ¥μΉκ°€ μ μΈμ‹λμ–΄ μλ”μ§€ ν™•μΈν•λ‹¤.
```python
lshw -C display
```

### μ„¤μΉ
Nvidia λ“λΌμ΄λ²„ μ„¤μΉλ¥Ό μ„ν•΄μ„λ” μ°μ„  `ubuntu-drivers`κ°€ ν•„μ”ν•©λ‹λ‹¤.
```python
sudo apt install ubuntu-drivers-common
```
μ΄ν›„ ubuntu-driversλ¥Ό μ΄μ©ν•μ—¬ κ¶μ¥ μ„¤μΉλ¥Ό μ§„ν–‰ν•λ‹¤.
```python
sudo add-apt-repository ppa:graphics-drivers/ppa
sudo apt update
sudo ubuntu-drivers autoinstall
```
μ‹κ°„μ΄ μ΅°κΈ κ±Έλ¦¬λ―€λ΅ μ΅°κΈ‰ν•΄ν•μ§€ λ§μ. μ„¤μΉκ°€ μ™„λ£λμ—λ‹¤λ©΄ μ¬λ¶€ν…μΌλ΅ λ§λ¬΄λ¦¬ν•λ‹¤.
```python
sudo reboot
```
μ΄μ  `nvidia-smi` λ…λ Ήμ–΄λ΅ GPUμ ν„μ¬ μƒνƒλ¥Ό λ³Ό μ μλ‹¤.

νΉμ‹λΌλ„ κ·€μ°®μ•„μ„ μ¬λ¶€ν…μ„ μ•ν•λ” λ¶„μ€ μ•„λμ™€ κ°™μ€ μ—λ¬λ¥Ό λ§λ‚  μ μμΌλ‹ κ·€μ°®λ”λΌλ„ κΌ­ ν•μ.

β οΈ **NVIDIA-SMI has failed because it couldn't communicate with the NVIDIA driver.**  
**Make sure that the latest NVIDIA driver is installed and running.**


nvidia-smiλ³΄λ‹¤ μΆ€ λ” κ°„λ‹¨ν•κ² λ³Ό μ μλ” ν΄λ΅λ” `gpustat`μ„ μ¶”μ²ν•λ‹¤. μ„¤μΉλ„ κ°„λ‹¨ν•λ‹¤.

```python
pip install gpustat
```
`gpustat`μ„ μ…λ ¥ν•λ©΄ GPU μƒνƒλ¥Ό λ³΄μ—¬μ¤€λ‹¤.

### μ°Έκ³ 
[Nvidiaλ“λΌμ΄λ²„ μ„¤μΉν•κΈ°](https://pstudio411.tistory.com/entry/Ubuntu-2004-Nvidia%EB%93%9C%EB%9D%BC%EC%9D%B4%EB%B2%84-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0)

<br>

# 2. μ„¤μΉ μ΄ν›„ λ§λ‚λ” μƒν™©

### π”’ λ¬Έμ 

π“ **`μ²μμ—λ” sshκ°€ μ λλ‹¤κ°€ μ–΄λ μκ°„λ¶€ν„° μ ‘μ†μ΄ λμ§€ μ•λ”λ‹¤`**

Nvidia λ“λΌμ΄λ²„μ νΈν™μ„± λ¬Έμ λ΅ μΈν•΄ μ»΄ν“¨ν„°κ°€ λ‹¤μ΄λλ” κ²ƒμ΄λΌκ³  μμƒν•΄μ„ μ—¬λ¬λ²μ μ¬μ„¤μΉλ¥Ό κ±°μ³¤μΌλ‚ ν•΄κ²°λμ§€ μ•μ•λ‹¤.

μ΄λ” λ¨λ‹ν„°λ¥Ό μ—°κ²°ν•΄ λ†“μ§€ μ•λ” μ„λ²„ μ»΄ν“¨ν„°μ νΉμ„±μƒ λ†“μΉκΈ° μ‰¬μ΄ λ¶€λ¶„μΈλ° μ•κ³  λ³΄λ‹ λ‹¨μν μ μ „ λ¨λ“μ— λ“¤μ–΄κ°„ κ²ƒμ΄μ—λ‹¤.

Nvidia λ“λΌμ΄λ²„λ¥Ό μ„¤μΉν•λ©΄ μ¬λ¶€ν…μ‹ λ””ν΄νΈ λ¨λ“κ°€ GUI λ¨λ“λ΅ λ³€κ²½λκ³  μ μ „ λ¨λ“λ„ μλ™μΌλ΅ μ„Έν…λλ‹¤. 

μ΄λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄μ„λ” μ»΄ν“¨ν„°μ μ μ „ λ¨λ“ μ§„μ…μ„ λ§‰μ•„μ•Ό ν•λ”λ° κ°€λ¥ν• λ°©λ²•μ€ μ΄ λ‘ κ°€μ§€μ΄λ‹¤.

### π”‘ ν•΄κ²° 

π“ **`λ…λ Ήμ–΄λ΅ μ μ „ λ¨λ“λ¥Ό λλ‹¤`** ([μ°Έκ³ ](https://heekangpark.github.io/linux/ubuntu-server-sleep))

ν• μ¤„μ΄λ©΄ κ°€λ¥ν•λ‹¤.

```python
sudo systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target
```

μ•„λ λ…λ Ήμ–΄λ΅ μ„¤μ •μ΄ μ λμ—λ”μ§€ ν™•μΈν•λ‹¤.

```python
systemctl status sleep.target suspend.target hibernate.target hybrid-sleep.target
```  
<br>

π“ **`κΈ°λ³Έ λ¨λ“λ¥Ό CLI λ¨λ“λ΅ μ „ν™ν•λ‹¤`** ([μ°Έκ³ ](https://booiljung.github.io/technical_articles/linux/switch_gui_and_cli.html))

κ΄€λ ¨ μ„¤μ • νμΌμ€ μ•„λμ μ„μΉμ— μλ‹¤.

```python
sudo vim /etc/default/grub
```

λ‹¤μ 3κ°€μ§€ μ‚¬ν•­μ— λ€ν•΄ μμ •ν•λ‹¤.
- `GRUB_CMDLINE_LINUX_DEFAULT=""`λ¥Ό μ£Όμ„ μ²λ¦¬
- `GRUB_CMDLINE_LINUX="text"`λ΅ λ³€κ²½
- `GRUB_TERMINAL=console`μ μ£Όμ„ μ κ±°

esc β†’ :wq β†’ enter μμΌλ΅ λ³€κ²½ μ‚¬ν•­μ„ μ €μ¥ν• λ’¤ μ•„λ λ…λ Ήμ–΄λ΅ μ μ©ν•λ‹¤.

```python
sudo update-grub # λ³€κ²½ μ‚¬ν•­ μ μ©
sudo systemctl set-default multi-user.target
sudo reboot # μ¬λ¶€ν…
```